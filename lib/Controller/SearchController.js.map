{"version":3,"sources":["../../src/Controller/SearchController.js"],"names":["SearchController","constructor","args","app","start","use","get","req","res","search","listen","webSearchPort","console","log","updateArgs","Args","domain","query","crawlStatesRepository","SqliteCrawlStatesRepository","getProjectPath","s","page","limit","then","urls","json"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEe,MAAMA,gBAAN,CAAuB;AAElCC,EAAAA,WAAW,CAACC,IAAD,EAAO;AACd,SAAKA,IAAL,GAAYA,IAAZ;AACA,SAAKC,GAAL,GAAW,uBAAX;AACH;;AAEDC,EAAAA,KAAK,GAAG;AACJ,SAAKD,GAAL,CAASE,GAAT,CAAa,oBAAb;AACA,SAAKF,GAAL,CAASG,GAAT,CAAa,GAAb,EAAkB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC5B,WAAKC,MAAL,CAAYF,GAAZ,EAAiBC,GAAjB;AACH,KAFD;AAGA,SAAKL,GAAL,CAASO,MAAT,CAAgB,KAAKR,IAAL,CAAUS,aAA1B,EAAyC,MAAM;AAC3CC,MAAAA,OAAO,CAACC,GAAR,iEAAqE,KAAKX,IAAL,CAAUS,aAA/E;AACH,KAFD;AAGH;;AAEDF,EAAAA,MAAM,CAACF,GAAD,EAAMC,GAAN,EAAW;AACb,QAAIM,UAAU,GAAG,IAAIC,aAAJ,CAAS,KAAKb,IAAd,CAAjB;AACAY,IAAAA,UAAU,CAACE,MAAX,GAAoBT,GAAG,CAACU,KAAJ,CAAUD,MAA9B;AACA,QAAIE,qBAAqB,GAAG,IAAIC,oCAAJ,CAAgCL,UAAU,CAACM,cAAX,EAAhC,CAA5B;AACAF,IAAAA,qBAAqB,CAACT,MAAtB,CAA6B;AACzBA,MAAAA,MAAM,EAAEF,GAAG,CAACU,KAAJ,CAAUI,CADO;AAEzBC,MAAAA,IAAI,EAAEf,GAAG,CAACU,KAAJ,CAAUK,IAFS;AAGzBC,MAAAA,KAAK,EAAEhB,GAAG,CAACU,KAAJ,CAAUM;AAHQ,KAA7B,EAIGC,IAJH,CAIQC,IAAI,IAAI;AACZjB,MAAAA,GAAG,CAACkB,IAAJ,CAASD,IAAT;AACH,KAND;AAOH;;AA5BiC","sourcesContent":["import express from 'express';\nimport cors from 'cors';\nimport Args from '../Model/Args';\nimport SqliteCrawlStatesRepository from '../Repository/SqliteCrawlStatesRepository';\n\nexport default class SearchController {\n\n    constructor(args) {\n        this.args = args;\n        this.app = express();\n    }\n\n    start() {\n        this.app.use(cors());\n        this.app.get('/', (req, res) => {\n            this.search(req, res);\n        });\n        this.app.listen(this.args.webSearchPort, () => {\n            console.log(`Starting content search webservice. Listening on port ${this.args.webSearchPort}!`);\n        })\n    }\n\n    search(req, res) {\n        let updateArgs = new Args(this.args);\n        updateArgs.domain = req.query.domain;\n        let crawlStatesRepository = new SqliteCrawlStatesRepository(updateArgs.getProjectPath());\n        crawlStatesRepository.search({\n            search: req.query.s,\n            page: req.query.page,\n            limit: req.query.limit,\n        }).then(urls => {\n            res.json(urls);\n        });\n    }\n}"],"file":"SearchController.js"}